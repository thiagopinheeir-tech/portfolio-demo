<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Demo - Projetos Realizados</title>
    <meta name="description" content="Demonstrações interativas dos sistemas desenvolvidos com foco em acessibilidade e usabilidade">
    
    <!-- Performance Meta Tags -->
    <meta name="theme-color" content="#2563eb">
    <meta name="color-scheme" content="light dark">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Resource Hints -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Critical CSS (Inlined for Performance) -->
    <style>
        /* Critical above-the-fold styles */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #1e293b; background: #f8fafc; }
        .portfolio-container { max-width: 1200px; margin: 0 auto; padding: 2rem 1rem; }
        .portfolio-header { text-align: center; margin-bottom: 4rem; }
        .portfolio-header h1 { font-size: 2.25rem; font-weight: 700; color: #0f172a; margin-bottom: 1rem; }
        .portfolio-header p { font-size: 1.125rem; color: #475569; max-width: 600px; margin: 0 auto; }
        .loading-state { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 5rem; color: #64748b; }
        .spinner { width: 40px; height: 40px; border: 4px solid #e2e8f0; border-top: 4px solid #2563eb; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 1rem; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="assets/css/main.css" as="style">
    <link rel="preload" href="assets/css/gallery.css" as="style">
    <link rel="preload" href="assets/css/performance.css" as="style">
    <link rel="preload" href="assets/js/performance.js" as="script">
    <link rel="preload" href="assets/js/main.js" as="script">
    
    <!-- Critical CSS Files -->
    <link rel="stylesheet" href="assets/css/main.css" data-critical>
    <link rel="stylesheet" href="assets/css/gallery.css" data-critical>
    <link rel="stylesheet" href="assets/css/performance.css" data-critical>
    
    <!-- Non-Critical CSS (Loaded Asynchronously) -->
    <link rel="preload" href="assets/css/navigation.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="assets/css/accessibility.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="assets/css/navigation.css">
        <link rel="stylesheet" href="assets/css/accessibility.css">
    </noscript>
    
    <!-- Favicon with Multiple Sizes -->
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple-touch-icon.png">
    
    <!-- Performance Monitoring Script (Inline for Immediate Execution) -->
    <script>
        // Inline performance monitoring for critical metrics
        window.performanceStart = performance.now();
        window.performanceMetrics = {
            navigationStart: performance.timing?.navigationStart || Date.now(),
            loadStart: performance.now(),
            criticalResourcesLoaded: 0,
            totalCriticalResources: 3
        };
        
        // Track critical resource loading
        function trackCriticalResource() {
            window.performanceMetrics.criticalResourcesLoaded++;
            if (window.performanceMetrics.criticalResourcesLoaded >= window.performanceMetrics.totalCriticalResources) {
                window.performanceMetrics.criticalLoadComplete = performance.now();
                console.log('Critical resources loaded in:', window.performanceMetrics.criticalLoadComplete - window.performanceMetrics.loadStart, 'ms');
            }
        }
    </script>
</head>
<body>
    <!-- Skip Links for Accessibility -->
    <a href="#main-content" class="skip-link">Pular para o conteúdo principal</a>
    
    <!-- Performance Indicator -->
    <div id="performance-indicator" class="performance-indicator" role="status" aria-live="polite"></div>
    
    <!-- Portfolio Container -->
    <div class="portfolio-container" role="main" id="main-content">
        <!-- Header Section -->
        <header class="portfolio-header">
            <h1>Projetos Realizados</h1>
            <p>Demonstrações interativas dos sistemas desenvolvidos com foco em acessibilidade e experiência do usuário</p>
        </header>
        
        <!-- Project Gallery -->
        <section class="project-gallery" id="projectGallery" aria-label="Galeria de projetos">
            <!-- Skeleton loading cards while content loads -->
            <div class="skeleton-card" aria-hidden="true">
                <div class="skeleton-image"></div>
                <div class="skeleton-content">
                    <div class="skeleton-title"></div>
                    <div class="skeleton-text"></div>
                    <div class="skeleton-text"></div>
                    <div class="skeleton-tags">
                        <div class="skeleton-tag"></div>
                        <div class="skeleton-tag"></div>
                        <div class="skeleton-tag"></div>
                    </div>
                    <div class="skeleton-button"></div>
                </div>
            </div>
            <div class="skeleton-card" aria-hidden="true">
                <div class="skeleton-image"></div>
                <div class="skeleton-content">
                    <div class="skeleton-title"></div>
                    <div class="skeleton-text"></div>
                    <div class="skeleton-text"></div>
                    <div class="skeleton-tags">
                        <div class="skeleton-tag"></div>
                        <div class="skeleton-tag"></div>
                    </div>
                    <div class="skeleton-button"></div>
                </div>
            </div>
            <div class="skeleton-card" aria-hidden="true">
                <div class="skeleton-image"></div>
                <div class="skeleton-content">
                    <div class="skeleton-title"></div>
                    <div class="skeleton-text"></div>
                    <div class="skeleton-text"></div>
                    <div class="skeleton-tags">
                        <div class="skeleton-tag"></div>
                        <div class="skeleton-tag"></div>
                        <div class="skeleton-tag"></div>
                    </div>
                    <div class="skeleton-button"></div>
                </div>
            </div>
            <!-- Project cards will be dynamically generated here -->
        </section>
        
        <!-- Loading State -->
        <div class="loading-state" id="loadingState" role="status" aria-live="polite" aria-label="Carregando projetos">
            <div class="spinner" aria-hidden="true"></div>
            <p>Carregando projetos...</p>
        </div>
    </div>
    
    <!-- Demo Modal -->
    <div class="demo-modal" id="demoModal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="demoTitle">
        <div class="demo-container">
            <div class="demo-header">
                <h2 id="demoTitle">Project Name</h2>
                <button class="close-demo" id="closeDemoBtn" aria-label="Fechar demo" type="button">&times;</button>
            </div>
            <div class="demo-content">
                <!-- Loading overlay for demo content -->
                <div class="loading-overlay" id="demoLoadingOverlay">
                    <div class="loading-content">
                        <div class="loading-spinner"></div>
                        <p class="loading-text">Carregando demonstração...</p>
                        <div class="loading-progress">
                            <div class="progress-bar"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Error overlay for demo content -->
                <div class="error-overlay" id="demoErrorOverlay">
                    <div class="error-content">
                        <div class="error-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="15" y1="9" x2="9" y2="15"/>
                                <line x1="9" y1="9" x2="15" y2="15"/>
                            </svg>
                        </div>
                        <h3 class="error-title">Erro ao Carregar Demo</h3>
                        <p class="error-message">Não foi possível carregar a demonstração. Verifique sua conexão e tente novamente.</p>
                        <div class="error-actions">
                            <button class="retry-btn" onclick="retryDemoLoad()">Tentar Novamente</button>
                            <button class="cancel-btn" onclick="closeDemoModal()">Fechar</button>
                        </div>
                    </div>
                </div>
                
                <iframe id="demoFrame" src="" frameborder="0" title="Demo do projeto" aria-label="Demonstração interativa do projeto" loading="lazy"></iframe>
            </div>
            <div class="demo-footer">
                <button class="fullscreen-btn" id="fullscreenBtn" type="button" aria-label="Abrir em tela cheia">Tela Cheia</button>
                <a href="#" target="_blank" class="external-link" id="externalLink" aria-label="Abrir demo em nova aba">Abrir em Nova Aba</a>
            </div>
        </div>
    </div>
    
    <!-- Critical JavaScript (Loaded Immediately) -->
    <script src="assets/js/performance.js" onload="trackCriticalResource()"></script>
    <script src="assets/js/main.js" onload="trackCriticalResource()"></script>
    
    <!-- Non-Critical JavaScript (Loaded Asynchronously) -->
    <script>
        // Load non-critical scripts after page load
        window.addEventListener('load', function() {
            const scripts = [
                'assets/js/file-operations.js',
                'assets/js/navigation.js',
                'assets/js/accessibility.js',
                'assets/js/demo-loader.js',
                'validate-gallery.js'
            ];
            
            scripts.forEach((src, index) => {
                setTimeout(() => {
                    const script = document.createElement('script');
                    script.src = src;
                    script.async = true;
                    script.defer = true;
                    document.head.appendChild(script);
                }, index * 100); // Stagger loading
            });
        });
    </script>
    
    <!-- Service Worker Registration for Caching -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
    
    <!-- Performance Monitoring -->
    <script>
        window.addEventListener('load', function() {
            const loadTime = performance.now() - window.performanceStart;
            const indicator = document.getElementById('performance-indicator');
            
            if (loadTime < 3000) {
                indicator.textContent = `Carregado em ${Math.round(loadTime)}ms ✓`;
                indicator.className = 'performance-indicator success visible';
            } else if (loadTime < 5000) {
                indicator.textContent = `Carregado em ${Math.round(loadTime)}ms ⚠`;
                indicator.className = 'performance-indicator warning visible';
            } else {
                indicator.textContent = `Carregado em ${Math.round(loadTime)}ms ✗`;
                indicator.className = 'performance-indicator error visible';
            }
            
            setTimeout(() => {
                indicator.classList.remove('visible');
            }, 3000);
            
            // Track Core Web Vitals
            if ('PerformanceObserver' in window) {
                try {
                    const observer = new PerformanceObserver((list) => {
                        for (const entry of list.getEntries()) {
                            if (entry.entryType === 'largest-contentful-paint') {
                                console.log('LCP:', entry.startTime);
                            }
                            if (entry.entryType === 'first-input') {
                                console.log('FID:', entry.processingStart - entry.startTime);
                            }
                        }
                    });
                    
                    observer.observe({ entryTypes: ['largest-contentful-paint', 'first-input'] });
                } catch (e) {
                    console.log('Performance Observer not fully supported');
                }
            }
        });
    </script>
</body>
</html>